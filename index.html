<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8"/>
        <title>Rock Paper Scissors</title>
    </head>
    <body>
        <script>
            const ROCK = "rock";
            const PAPER = "paper";
            const SCISSORS = "scissors";
            
            let playerScore = 0;
            let computerScore = 0;

            function computerPlay() {
                let choice = Math.floor(Math.random() * Math.floor(3));
                if (choice === 0) {
                    return ROCK;
                } else if (choice == 1) {
                    return PAPER;
                } else {
                    return SCISSORS;
                }
            }

            function playRound(playerSelection, computerSelection) {
                playerSelection = playerSelection.toLowerCase();
                if (playerSelection == computerSelection) {
                    return "There is a tie!";
                } else if (playerSelection == ROCK) {
                    if (computerSelection == PAPER) {
                        computerScore++;
                        return "You Lose! Paper beats Rock";
                    } else {
                        playerScore++;
                        return "You Win! Rock beats Scissors";
                    }
                } else if (playerSelection == PAPER) {
                    if (computerSelection == ROCK) {
                        playerScore++;
                        return "You Win! Paper beats Rock";
                    } else {
                        computerScore++;
                        return "You Lose! Scissors beats Paper";
                    }
                } else {
                    if (computerSelection == ROCK) {
                        computerScore++;
                        return "You Lose! Rock beats Scissors";
                    } else {
                        playerScore++;
                        return "You Win! Scissors beats Paper"
                    }
                }
            }

            function getPlayerSelection() {
                let inputValid = false;
                while (!inputValid) {
                    let playerSelection = prompt("What is your move (r/p/s)?: ");
                    playerSelection = playerSelection.toLowerCase().charAt(0);

                    if (playerSelection == 'r') {
                        return ROCK;
                    } else if (playerSelection == 'p') {
                        return PAPER;
                    } else if (playerSelection == 's') {
                        return SCISSORS;
                    } else {
                        console.log("Please only input either r, p, or s")
                    }
                }
            }

            function game() {
                console.log("Welcome to Rock Paper Scissors!\n");

                for (let round = 1; round <= 5; round++) {
                    console.log(`Round ${round}\n----------`);
                    let playerSelection = getPlayerSelection();
                    let computerSelection = computerPlay();
                    console.log(playRound(playerSelection, computerSelection));
                }

                if (playerScore > computerScore) {
                    console.log("\nCongrats, you won!");
                } else if (playerScore < computerScore) {
                    console.log("\nSorry, the computer won.");
                } else {
                    console.log("\nThere's no winner - you tied with the computer!");
                }

                console.log(`You got ${playerScore} point(s), the computer got ${computerScore} point(s).`);
            }

            game();
        </script>
    </body>
</html>